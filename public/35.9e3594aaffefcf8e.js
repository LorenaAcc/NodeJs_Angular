"use strict";(self.webpackChunkrecipe=self.webpackChunkrecipe||[]).push([[35],{3035:(_,p,l)=>{l.r(p),l.d(p,{AuthModule:()=>L});var d=l(6895),r=l(4006),u=l(8996),g=l(6827),t=l(4650);let f=(()=>{class e{constructor(){this.close=new t.vpe}onClose(){this.close.emit()}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-alert"]],inputs:{message:"message"},outputs:{close:"close"},decls:7,vars:1,consts:[[1,"backdrop",3,"click"],[1,"alert-box"],[1,"alert-box-actions"],[1,"btn","btn-primary",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return n.onClose()}),t.qZA(),t.TgZ(1,"div",1)(2,"p"),t._uU(3),t.qZA(),t.TgZ(4,"div",2)(5,"button",3),t.NdJ("click",function(){return n.onClose()}),t._uU(6,"Close"),t.qZA()()()),2&o&&(t.xp6(3),t.Oqu(n.message))},styles:[".backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(108,99,99,.073);z-index:50}.alert-box[_ngcontent-%COMP%]{position:fixed;top:30vh;left:20vw;width:60vw;padding:16px;z-index:100;background:rgb(234,56,97);box-shadow:0 2px 8px rbga(0,0,0,.26);border-radius:4px}.alert-box-actions[_ngcontent-%COMP%]{text-align:right}"]}),e})(),m=(()=>{class e{constructor(o){this.viewContainerRef=o}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(t.s_b))},e.\u0275dir=t.lG2({type:e,selectors:[["","appPlaceholder",""]]}),e})();var v=l(6065),b=l(4859),x=l(3546),h=l(9549),C=l(284);let A=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-loading-spinner"]],decls:3,vars:0,consts:[[1,"lds-ripple"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"div")(2,"div"),t.qZA())},styles:[".lds-ripple[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-ripple[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;border:4px solid rgb(77,38,231);opacity:1;border-radius:50%;animation:lds-ripple 1s cubic-bezier(0,.2,.8,1) infinite}.lds-ripple[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.5s}@keyframes lds-ripple{0%{top:36px;left:36px;width:0;height:0;opacity:0}4.9%{top:36px;left:36px;width:0;height:0;opacity:0}5%{top:36px;left:36px;width:0;height:0;opacity:1}to{top:0px;left:0px;width:72px;height:72px;opacity:0}}"]}),e})();function y(e,s){}function M(e,s){1&e&&(t.TgZ(0,"div",5),t._UZ(1,"app-loading-spinner"),t.qZA())}function w(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"form",6,7),t.NdJ("ngSubmit",function(){t.CHM(o);const i=t.MAs(1),a=t.oxw();return t.KtG(a.onSubmit(i))}),t.TgZ(2,"mat-form-field",8)(3,"mat-label"),t._uU(4,"E-mail"),t.qZA(),t._UZ(5,"input",9),t.qZA(),t.TgZ(6,"mat-form-field",8)(7,"mat-label"),t._uU(8,"Password"),t.qZA(),t._UZ(9,"input",10),t.qZA(),t.TgZ(10,"div")(11,"button",11),t._uU(12),t.qZA(),t._uU(13," | "),t.TgZ(14,"button",12),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.onSwitchMode())}),t._uU(15),t.qZA()()()}if(2&e){const o=t.MAs(1),n=t.oxw();t.xp6(11),t.Q6J("disabled",!o.valid),t.xp6(1),t.Oqu(n.isLoginMode?"Login":"Sign up"),t.xp6(3),t.hij("Switch to ",n.isLoginMode?"Sign up":"Login","")}}let Z=(()=>{class e{constructor(o,n,i){this.authService=o,this.router=n,this.componentFactoryResolver=i,this.isLoginMode=!0,this.isLoading=!1,this.error=null}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(o){if(!o.valid)return;const n=o.value.email,i=o.value.password;let a;this.isLoading=!0,console.log("onSubmit_isLoginMode: "+this.isLoginMode),this.isLoginMode?(console.log("isLoginMode"),a=this.authService.login(n,i)):(console.log("!isLoginMode"),a=this.authService.signUp(n,i)),a.subscribe(c=>{console.log(c),this.isLoading=!1,this.router.navigate(["/recipes"])},c=>{console.log(c),this.error=c,this.showErrorAlert(c),this.isLoading=!1}),o.reset()}onHandleError(){this.error=null}ngOnDestroy(){this.closeSub&&this.closeSub.unsubscribe()}showErrorAlert(o){const n=this.componentFactoryResolver.resolveComponentFactory(f),i=this.alertHost.viewContainerRef;i.clear();const a=i.createComponent(n);a.instance.message=o,this.closeSub=a.instance.close.subscribe(()=>{this.closeSub.unsubscribe(),i.clear()})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(v.e),t.Y36(u.F0),t.Y36(t._Vd))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-auth"]],viewQuery:function(o,n){if(1&o&&t.Gf(m,5),2&o){let i;t.iGM(i=t.CRH())&&(n.alertHost=i.first)}},decls:6,vars:2,consts:[["appPlaceholder",""],["id","authPanel",1,"row"],[1,"col-xs-12","col-md-6","col-md-offset-3"],["style","text-align: center;",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[2,"text-align","center"],[3,"ngSubmit"],["authForm","ngForm"],["apparience","fill",1,"formField"],["type","email","matInput","","placeholder","Ex. pat@example.com","ngModel","","name","email","required",""],["type","password","matInput","","placeholder","Password","ngModel","","name","password","required","","minlength","6"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["mat-raised-button","","color","accent","type","button",3,"click"]],template:function(o,n){1&o&&(t.YNc(0,y,0,0,"ng-template",0),t.TgZ(1,"mat-card")(2,"div",1)(3,"div",2),t.YNc(4,M,2,0,"div",3),t.YNc(5,w,16,3,"form",4),t.qZA()()()),2&o&&(t.xp6(4),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",!n.isLoading))},dependencies:[d.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.wO,r.On,r.F,b.lW,x.a8,h.KE,h.hX,C.Nt,A,m],styles:["#authPanel[_ngcontent-%COMP%]{padding:4%}.form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.formField[_ngcontent-%COMP%]{width:100%}.mat-card[_ngcontent-%COMP%]{width:100%;height:100%;box-sizing:border-box}"]}),e})();var S=l(4466);let L=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,r.u5,g.g,u.Bz.forChild([{path:"",component:Z}]),S.m]}),e})()}}]);